# 点餐系统 Dashboard 小组件说明

## 概述
为点餐系统首页控制台添加了多个实用的小组件，提供实时数据监控和统计信息。

## 小组件列表（按显示顺序）

### 1. 欢迎信息组件 (WelcomeMessage) - 排序: 1
- **位置**: 页面顶部
- **功能**: 根据当前时间显示个性化的欢迎信息
- **特点**: 
  - 根据时间段显示不同问候语
  - 显示当前日期时间
  - 美观的渐变背景设计

### 2. 订单统计概览 (OrdersOverview) - 排序: 2
- **类型**: 统计卡片
- **功能**: 显示订单相关统计数据
- **包含**:
  - 今日订单总数
  - 待处理订单数量
  - 进行中订单数量
  - 已完成订单数量

### 3. 热门菜品统计 (PopularMenusOverview) - 排序: 3
- **类型**: 统计卡片
- **功能**: 显示最受欢迎的菜品排名
- **特点**:
  - 显示前3名热门菜品
  - 不同排名使用不同颜色
  - 显示点菜次数

### 4. 系统概览 (SystemOverview) - 排序: 4
- **类型**: 统计卡片
- **功能**: 显示系统基础数据
- **包含**:
  - 总菜品数
  - 可见菜品数
  - 物料种类数
  - 历史订单总数

### 5. 最近订单表格 (LatestOrders) - 排序: 5
- **类型**: 数据表格
- **功能**: 显示最新的10个订单
- **列信息**:
  - 订单号
  - 用餐时间
  - 订单状态（带颜色标识）
  - 菜品数量
  - 创建时间

### 6. 订单状态分布图表 (OrderStatusChart) - 排序: 6
- **类型**: 环形图
- **功能**: 可视化显示各状态订单的分布
- **特点**:
  - 使用不同颜色区分状态
  - 显示百分比分布

### 7. 今日订单趋势图表 (TodayOrdersChart) - 排序: 7
- **类型**: 折线图
- **功能**: 显示今日24小时的订单数量趋势
- **特点**:
  - 按小时统计
  - 带填充的折线图
  - 实时数据更新

## 技术实现

### 文件结构
```
app/Filament/
├── Widgets/
│   ├── WelcomeMessage.php
│   ├── OrdersOverview.php
│   ├── PopularMenusOverview.php
│   ├── SystemOverview.php
│   ├── LatestOrders.php
│   ├── OrderStatusChart.php
│   └── TodayOrdersChart.php
└── Pages/
    └── Dashboard.php

resources/views/filament/widgets/
└── welcome-message.blade.php
```

### 数据来源
- **Order模型**: 订单相关统计
- **Menu模型**: 菜品相关统计
- **Material模型**: 物料相关统计
- **OrderItem模型**: 订单项统计

### 响应式设计
- 小组件支持响应式布局
- 在不同屏幕尺寸下自动调整
- 使用Filament内置的网格系统

## 使用说明

1. 访问 `/admin` 进入管理后台
2. 首页将显示所有配置的小组件
3. 小组件数据会实时更新
4. 可以点击表格中的数据进行详细查看

## 自定义配置

### 小组件排序
每个小组件都设置了 `protected static ?int $sort` 属性来控制显示顺序：
- 1: 欢迎信息组件
- 2: 订单统计概览
- 3: 热门菜品统计
- 4: 系统概览
- 5: 最近订单表格
- 6: 订单状态分布图表
- 7: 今日订单趋势图表

### 修改小组件顺序
可以通过修改每个小组件类中的 `$sort` 属性来调整显示顺序，数字越小越靠前。

### 添加新的小组件
1. 在 `app/Filament/Widgets/` 目录下创建新的小组件类
2. 在 `AdminPanelProvider.php` 中注册新小组件
3. 根据需要创建对应的视图文件

### 调整小组件布局
- 使用 `$columnSpan` 属性控制小组件宽度
- 使用 `getColumns()` 方法控制网格列数
- 支持响应式布局配置

## 注意事项

1. 确保数据库中有相应的数据
2. 小组件会自动处理空数据情况
3. 图表组件需要Chart.js支持（Filament内置）
4. 所有时间显示使用系统时区
